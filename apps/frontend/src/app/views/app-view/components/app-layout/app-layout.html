<div
    class="flex h-screen overflow-hidden bg-linear-to-br from-primary-700 to-primary-100 dark:from-surface-700 dark:to-surface-500"
>
    <!-- mobile sidebar -->
    <!-- Off-canvas menu for mobile, show/hide based on off-canvas menu state. -->
    <div
        class="fixed inset-0 z-40 flex md:hidden"
        [class.hidden]="!overlayVisible()"
        role="dialog"
        aria-modal="true"
    >
        @if (overlayVisible()) {
            <div
                class="fixed inset-0 bg-gray-600 bg-opacity-75 opacity-0"
                aria-hidden="true"
                [rrTransition]="isSidebarOpened()"
                rrTransitionEntering="transition-opacity ease-linear duration-300"
                rrTransitionEnteringFrom="opacity-0"
                rrTransitionEnteringTo="opacity-100"
                rrTransitionLeaving="transition-opacity ease-linear duration-300"
                rrTransitionLeavingFrom="opacity-100"
                rrTransitionLeavingTo="opacity-0"
                (onTransitionLeavingEnd)="hideOverlay()"
            ></div>
        }

        <div
            class="relative flex w-full max-w-xs flex-1 -translate-x-full flex-col"
            [rrTransition]="isSidebarOpened()"
            rrTransitionEntering="transition ease-in-out duration-300 transform"
            rrTransitionEnteringFrom="-translate-x-full"
            rrTransitionEnteringTo="translate-x-0"
            rrTransitionLeaving="transition ease-in-out duration-300 transform"
            rrTransitionLeavingFrom="translate-x-0"
            rrTransitionLeavingTo="-translate-x-full"
        >
            <div
                class="absolute top-0 right-0 -mr-12 pt-2 opacity-0"
                [rrTransition]="isSidebarOpened()"
                rrTransitionEntering="ease-in-out duration-300"
                rrTransitionEnteringFrom="opacity-0"
                rrTransitionEnteringTo="opacity-100"
                rrTransitionLeaving="ease-in-out duration-300"
                rrTransitionLeavingFrom="opacity-100"
                rrTransitionLeavingTo="opacity-0"
            >
                <button
                    class="ml-1 flex h-10 w-10 items-center justify-center rounded-full text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
                    (click)="toggleSidebar()"
                >
                    <span class="sr-only">Close sidebar</span>
                    <span>x icon</span>
                </button>
            </div>

            <div class="h-0 flex-1 overflow-y-auto pt-5 pb-4">
                <ng-container *ngTemplateOutlet="sidebarTemplate()">
                </ng-container>
            </div>
        </div>

        <div class="w-14 shrink-0" aria-hidden="true">
            <!-- Force sidebar to shrink to fit close icon -->
        </div>
    </div>

    <!-- Static sidebar for desktop -->
    <div
        class="hidden transition-all duration-300 md:flex md:shrink-0"
        [class.-translate-x-full]="!isSidebarOpened()"
    >
        <div class="flex w-64 flex-col">
            <ng-container *ngTemplateOutlet="sidebarTemplate()"> </ng-container>
        </div>
    </div>

    <!-- main container -> on the right of the sidebar -->
    <div
        class="flex w-0 flex-1 flex-col overflow-hidden transition-all duration-300"
        [class.-ml-64]="!isSidebarOpened()"
    >
        <!-- topbar -->
        <div class="p-4 pt-8 pb-0">
            <ng-container *ngTemplateOutlet="topbarTemplate()"> </ng-container>
        </div>

        <!-- main content -->
        <main
            class="relative z-0 flex-1 h-full overflow-y-auto focus:outline-none"
        >
            <div class="mx-auto px-4 py-8 h-full sm:px-6 md:px-8">
                <ng-content></ng-content>
            </div>
        </main>

        <!-- footer -->
        <div class="p-4">
            <ng-container *ngTemplateOutlet="footerTemplate()"></ng-container>
        </div>
    </div>
</div>
